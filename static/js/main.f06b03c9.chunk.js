(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,n,t){},12:function(e,n,t){"use strict";t.r(n);var r=t(0),o=t.n(r),u=t(4),a=t.n(u),c=(t(11),t(1)),l=function(e){return o.a.createElement("div",null,o.a.createElement("h1",null,"\u041f\u043e\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u0442\u0430\u0431\u043b\u0438\u0446\u0443"),o.a.createElement("form",{onSubmit:e.onSubmit},o.a.createElement("input",{onChange:function(n){return e.onChange(n,"rows")},value:e.values.rows,type:"number",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u0442\u0440\u043e\u043a"}),o.a.createElement("input",{onChange:function(n){return e.onChange(n,"cols")},value:e.values.cols,type:"number",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u0442\u043e\u043b\u0431\u0446\u043e\u0432"}),o.a.createElement("input",{onChange:function(n){return e.onChange(n,"x")},value:e.values.x,type:"number",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0447\u0438\u0441\u043b\u043e X"}),o.a.createElement("input",{type:"submit",value:"\u041f\u043e\u0441\u0442\u0440\u043e\u0438\u0442\u044c"})))},i=t(2),s=function(e){return o.a.createElement("td",{className:e.className,onClick:e.onClick,onMouseEnter:e.onMouseOver,onMouseLeave:e.onMouseOut},o.a.createElement("span",{className:"amount"},e.value),e.children)},f=function(e){var n=[e.higlight?"higlight":"",e.over?"over":""].join(" "),t={height:"".concat(e.percentValue,"%")};return o.a.createElement(s,{className:n,value:e.value,onClick:e.onClick,onMouseOver:e.onMouseOver,onMouseOut:e.onMouseOut},o.a.createElement("span",{className:"percent_value"},e.percentValue,"%"),o.a.createElement("div",{className:"percent",style:t}))},m=function(e){return o.a.createElement(s,{className:"sum_cell",value:e.value,onMouseOver:e.onMouseOver,onMouseOut:e.onMouseOut},o.a.createElement("span",{onClick:e.onRowRemove,className:"delete_row"},o.a.createElement("span",null,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")))},v=function(e){return o.a.createElement("tr",null,e.children)},b=function(e){var n=e.amountDigits+2,t=Object(r.useRef)([]),u=Object(r.useRef)(-1),a=Object(r.useRef)([]),l=Object(r.useRef)([]),b=Object(r.useState)(function(){for(var n=[],r=-1===u.current,o=0;o<e.rows;o++)n[o]=R(o),r&&(u.current=t.current[o]=j());return n}),h=Object(c.a)(b,2),p=h[0],E=h[1],w=Object(r.useState)(C(e.rows,e.cols,p)),O=Object(c.a)(w,2),d=O[0],g=O[1];function j(){return++u.current}function R(t){for(var r,o=[],u=0;u<e.cols;u++)o[u]=(r=u,{id:"".concat(t).concat(r),amount:parseInt(Math.random().toString().substring(2,n))});return o}function M(e,n,t){g(C(e,n,t))}function C(e,n,t){for(var r=[],o=0;o<n;o++)r[o]=k(o,t,e);return r}function k(e,n,t){for(var r=0,o=0;o<t;o++)r+=n[o][e].amount;return r}function D(n,t){return(t/function(n){for(var t=0,r=0;r<e.cols;r++)t+=p[n][r].amount;return t}(n)*100).toFixed(2)}function x(n,t){var r=p[n][t];l.current=p.reduce(function(e,n,t){return n.forEach(function(n,o){e.push({row:t,col:o,amountDiff:Math.abs(r.amount-n.amount),cell:n})}),e},[]),l.current=l.current.sort(function(e,n){return e.amountDiff<n.amountDiff?-1:e.amountDiff>n.amountDiff?1:e.amountDiff===n.amountDiff?0:void 0}),a.current=[];for(var o,u,c=l.current.length,i=0,s=0;i<e.x;s++){if(c===s)return;l.current[s].cell!==r&&(a.current[i]=l.current[s],o=l.current[s].row,u=l.current[s].col,S(o,u,!0),i++)}}function y(){for(var n,t,r=a.current.length,o=0;o<e.x;o++){if(r===o)return;n=a.current[o].row,t=a.current[o].col,S(n,t,!1)}}function S(e,n,t){E(function(r){return r[e][n].higlight=t,Object(i.a)(r)})}for(var N=[],I=function(n){N.push(o.a.createElement(v,{key:t.current[n]},p[n].map(function(t,r){return o.a.createElement(f,{key:r,percentValue:D(n,t.amount),onClick:function(t){return o=n,u=r,void E(function(n){return n[o][u].amount+=1,M(e.rows,e.cols,n),y(),x(o,u),Object(i.a)(n)});var o,u},onMouseOver:function(e){x(n,r)},onMouseOut:function(e){y()},over:t.over,value:t.amount,higlight:t.higlight})}),o.a.createElement(m,{onMouseOver:function(e){return t=n,void E(function(e){return e[t].forEach(function(e){e.over=!0}),Object(i.a)(e)});var t},onMouseOut:function(e){return t=n,void E(function(e){return e[t].forEach(function(e){e.over=!1}),Object(i.a)(e)});var t},onRowRemove:function(r){return function(n,r){n.preventDefault(),p.splice(r,1),t.current.splice(r,1),E(p),M(e.rows-1,e.cols,p),e.onRowRemove(n)}(r,n)},value:p[n].reduce(function(e,n){return e+n.amount},0)})))},A=0;A<e.rows;A++)I(A);return o.a.createElement("table",null,o.a.createElement("caption",null,o.a.createElement("h2",null,"\u0421\u0433\u0435\u043d\u0435\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u0430\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u0430"),o.a.createElement("button",{className:"table-btn",onClick:function(n,r){p[p.length]=R(p.length),t.current[t.current.length]=j(),E(p),M(e.rows+1,e.cols,p),e.onRowAdd(n)}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0442\u0440\u043e\u043a\u0443")),o.a.createElement("thead",null),o.a.createElement("tbody",null,N),o.a.createElement("tfoot",null,o.a.createElement(v,null,d.map(function(e,n){return o.a.createElement(s,{key:n,value:e})}))))},h=function(e){return o.a.createElement(b,{cols:e.cols,rows:e.rows,x:e.x,amountDigits:e.amountDigits,onRowAdd:e.onRowAdd,onRowRemove:e.onRowRemove})},p=function(e){var n=Object(r.useState)(""),t=Object(c.a)(n,2),u=t[0],a=t[1],i=Object(r.useState)(""),s=Object(c.a)(i,2),f=s[0],m=s[1],v=Object(r.useState)(""),b=Object(c.a)(v,2),p=b[0],E=b[1],w=Object(r.useState)("CreateTable"),O=Object(c.a)(w,2),d=O[0],g=O[1];switch(d){case"CreateTable":return o.a.createElement(l,{onSubmit:function(e){e.preventDefault(),g("Table")},onChange:function(e,n){switch(n){case"rows":a(parseInt(e.target.value));break;case"cols":m(parseInt(e.target.value));break;case"x":E(parseInt(e.target.value))}},values:{rows:u,cols:f,x:p}});case"Table":return o.a.createElement(h,{rows:u,cols:f,x:p,amountDigits:3,onRowAdd:function(){a(u+1)},onRowRemove:function(){a(u-1)}})}};a.a.render(o.a.createElement(p,null),document.getElementById("root"))},5:function(e,n,t){e.exports=t(12)}},[[5,1,2]]]);
//# sourceMappingURL=main.f06b03c9.chunk.js.map