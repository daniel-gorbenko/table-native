{"version":3,"sources":["components/page-create-table/page-create-table.js","components/cell/cell.js","components/percent-cell/percent-cell.js","components/sum-cell/sum-cell.js","components/row/row.js","components/table/table.js","components/page-table/page-table.js","components/app/app.js","index.js"],"names":["page_create_table","props","react_default","a","createElement","onSubmit","onChange","e","value","values","rows","type","placeholder","cols","x","cell_cell","className","onClick","onMouseEnter","onMouseOver","onMouseLeave","onMouseOut","children","percent_cell","higlight","over","join","style","height","percentValue","sum_cell","onRowRemove","row_row","Table","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","onRowAdd","preventDefault","setState","state","table","toConsumableArray","length","generateRowData","rowIdList","getNextRowId","calcSums","row","splice","amountDigitsIndex","amountDigits","_currentRowId","generateTableData","sums","getRowsSums","getColsSums","i","j","generateCellData","y","id","replace","amount","generateAmount","parseInt","Math","random","toString","substring","calcSumByRow","calcSumByCol","col","sumByRow","sumByCol","_this2","newTableState","assign","unHiglightProcess","higlightProcess","cellRow","cellCol","cellSelected","sortedCells","reduce","cells","rowIndex","forEach","cell","colIndex","push","amountDiff","abs","sort","b","higlighted","sortedCellsLength","selected","higlightCell","higlightedLength","unHiglightCell","setCellHighlight","light","index","toFixed","_this3","_loop","key","dataAttr","map","getPercent","onCellClick","onCellOver","onCellOut","onSumCellOver","onSumCellOut","s","href","sum","React","Component","page_table","table_Table","App","togglePage","page","name","defineProperty","target","cb","ReactDOM","render","app_App","document","getElementById"],"mappings":"+OAEeA,EAAA,SAACC,GACd,OACIC,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,+GAEAF,EAAAC,EAAAC,cAAA,QAAMC,SAAUJ,EAAMI,UACpBH,EAAAC,EAAAC,cAAA,SAAOE,SAAU,SAACC,GAAD,OAAON,EAAMK,SAASC,EAAG,SAASC,MAAOP,EAAMQ,OAAOC,KAAMC,KAAK,SAASC,YAAY,2IACvGV,EAAAC,EAAAC,cAAA,SAAOE,SAAU,SAACC,GAAD,OAAON,EAAMK,SAASC,EAAG,SAASC,MAAOP,EAAMQ,OAAOI,KAAMF,KAAK,SAASC,YAAY,6JACvGV,EAAAC,EAAAC,cAAA,SAAOE,SAAU,SAACC,GAAD,OAAON,EAAMK,SAASC,EAAG,MAAMC,MAAOP,EAAMQ,OAAOK,EAAGH,KAAK,SAASC,YAAY,gFAEjGV,EAAAC,EAAAC,cAAA,SAAOO,KAAK,SAASH,MAAM,qECVtBO,EAAA,SAACd,GACd,OAAOC,EAAAC,EAAAC,cAAA,MAAIY,UAAWf,EAAMe,UACjBC,QAAShB,EAAMgB,QACfC,aAAcjB,EAAMkB,YACpBC,aAAcnB,EAAMoB,YACnBnB,EAAAC,EAAAC,cAAA,QAAMY,UAAU,UAAUf,EAAMO,OAC/BP,EAAMqB,WCJNC,EAAA,SAACtB,GACd,IAKIe,EALU,CACZf,EAAMuB,SAAW,WAAa,GAC9BvB,EAAMwB,KAAO,OAAS,IAGAC,KAAK,KAEzBC,EAAQ,CACVC,OAAQ3B,EAAM4B,aAAe,KAG/B,OACE3B,EAAAC,EAAAC,cAACW,EAAD,CAAMC,UAAWA,EAAWR,MAAOP,EAAMO,MACzCS,QAAShB,EAAMgB,QACfE,YAAalB,EAAMkB,YACnBE,WAAYpB,EAAMoB,YAChBnB,EAAAC,EAAAC,cAAA,QAAMY,UAAU,iBAAiBf,EAAM4B,aAAvC,KACA3B,EAAAC,EAAAC,cAAA,OAAKY,UAAU,UAAUW,MAAOA,MClBvBG,EAAA,SAAC7B,GACd,OACEC,EAAAC,EAAAC,cAACW,EAAD,CAAMC,UAAU,WAAWR,MAAOP,EAAMO,MACtCW,YAAalB,EAAMkB,YACnBE,WAAYpB,EAAMoB,YAClBnB,EAAAC,EAAAC,cAAA,QAAMa,QAAShB,EAAM8B,YAAaf,UAAU,cAAad,EAAAC,EAAAC,cAAA,6DCPhD4B,EAAA,SAAC/B,GACd,OACEC,EAAAC,EAAAC,cAAA,UAAKH,EAAMqB,WCGMW,cACnB,SAAAA,EAAYhC,GAAO,IAAAiC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAJ,IACjBC,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAF,GAAAO,KAAAH,KAAMpC,KAoORwC,SAAW,SAAClC,GACVA,EAAEmC,iBAEFR,EAAKS,SAAS,SAAAC,GAEZ,IAAIC,EAAKV,OAAAW,EAAA,EAAAX,CAAOS,EAAMC,OAKtB,OAHAA,EAAMA,EAAME,QAAUb,EAAKc,gBAAgBJ,EAAMC,MAAME,QACvDb,EAAKe,UAAUf,EAAKe,UAAUF,QAAUb,EAAKgB,eAEtC,CAACL,MAAOA,IACd,WACDX,EAAKiB,aAGPjB,EAAKjC,MAAMwC,SAASlC,IApPH2B,EAuPnBH,YAAc,SAACxB,EAAG6C,GAChB7C,EAAEmC,iBAEFR,EAAKjC,MAAM8B,YAAYxB,GAEvB2B,EAAKS,SAAS,SAAAC,GAEZ,IAAIC,EAAKV,OAAAW,EAAA,EAAAX,CAAOS,EAAMC,OAKtB,OAHAA,EAAMQ,OAAOD,EAAK,GAClBlB,EAAKe,UAAUI,OAAOD,EAAK,GAEpB,CAACP,MAAOA,IACd,WACDX,EAAKiB,cAlQPjB,EAAKoB,kBAAoBrD,EAAMsD,aAAe,EAE9CrB,EAAKe,UAAY,GACjBf,EAAKsB,eAAiB,EAEtBtB,EAAKU,MAAQ,CACXC,MAAOX,EAAKuB,qBAGdvB,EAAKU,MAAMc,KAAO,CAChBhD,KAAMwB,EAAKyB,cACX9C,KAAMqB,EAAK0B,eAdI1B,8EAmBjB,QAASG,KAAKmB,0DAMd,IAFA,IAAIX,EAAQ,GAEJgB,EAAI,EAAGA,EAAIxB,KAAKpC,MAAMS,KAAMmD,IAClChB,EAAMgB,GAAKxB,KAAKW,gBAAgBa,GAChCxB,KAAKY,UAAUY,GAAKxB,KAAKa,eAG3B,OAAOL,0CAGOgB,GAGd,IAFA,IAAIT,EAAM,GAEFU,EAAI,EAAGA,EAAIzB,KAAKpC,MAAMY,KAAMiD,IAClCV,EAAIU,GAAKzB,KAAK0B,iBAAiBF,EAAGC,GAGpC,OAAOV,2CAGQtC,EAAGkD,GAGlB,MAAO,CACLC,GAHe,MAGAC,QAAQ,IAAKpD,GAAGoD,QAAQ,IAAKF,GAC5CG,OAAQ9B,KAAK+B,2DAKf,OAAOC,SAASC,KAAKC,SACFC,WACAC,UAAU,EAAGpC,KAAKiB,uDAKrC,IAAII,EAAO,CACPhD,KAAM2B,KAAKsB,cACX9C,KAAMwB,KAAKuB,eAGfvB,KAAKM,SAAS,CAACe,+CAMf,IAFA,IAAIhD,EAAO,GAEHmD,EAAI,EAAGA,EAAIxB,KAAKpC,MAAMS,KAAMmD,IAClCnD,EAAKmD,GAAKxB,KAAKqC,aAAab,GAG9B,OAAOnD,wCAMP,IAFA,IAAIG,EAAO,GAEHgD,EAAI,EAAGA,EAAIxB,KAAKpC,MAAMY,KAAMgD,IAClChD,EAAKgD,GAAKxB,KAAKsC,aAAad,GAG9B,OAAOhD,wCAGKuC,EAAKwB,GACjB,MAAO,CACLxB,IAAKf,KAAKqC,aAAatB,GACvBwB,IAAKvC,KAAKsC,aAAaC,yCAIdxB,GAGX,IAFA,IAAIyB,EAAW,EAEPhB,EAAI,EAAGA,EAAIxB,KAAKpC,MAAMY,KAAMgD,IAClCgB,GAAYxC,KAAKO,MAAMC,MAAMO,GAAKS,GAAGM,OAGvC,OAAOU,uCAGID,GAGX,IAFA,IAAIE,EAAW,EAEPjB,EAAI,EAAGA,EAAIxB,KAAKpC,MAAMS,KAAMmD,IAClCiB,GAAYzC,KAAKO,MAAMC,MAAMgB,GAAGe,GAAKT,OAGvC,OAAOW,sCAGGvE,EAAG6C,EAAKwB,GAAK,IAAAG,EAAA1C,KAEvBA,KAAKM,SAAS,SAAAC,GACZ,IAAIoC,EAAa7C,OAAAW,EAAA,EAAAX,CAAO4C,EAAKnC,MAAMC,OAMnC,OALAmC,EAAc5B,GAAdjB,OAAAW,EAAA,EAAAX,CAAyB6C,EAAc5B,IACvC4B,EAAc5B,GAAKwB,GAAOzC,OAAO8C,OAAO,GAAID,EAAc5B,GAAKwB,GAAM,CACnET,OAAQa,EAAc5B,GAAKwB,GAAKT,OAAS,IAGpC,CAACtB,MAAOmC,IACd,WACDD,EAAK5B,WAEL4B,EAAKG,oBACLH,EAAKI,gBAAgB/B,EAAKwB,wCAInBrE,EAAG6C,EAAKwB,GACjBvC,KAAK8C,gBAAgB/B,EAAKwB,qCAGlBrE,EAAG6C,EAAKwB,GAChBvC,KAAK6C,4DAGSE,EAASC,GACvB,IAAIC,EAAejD,KAAKO,MAAMC,MAAMuC,GAASC,GAE7ChD,KAAKkD,YAAclD,KAAKO,MAAMC,MAAM2C,OAAO,SAACC,EAAOrC,EAAKsC,GAUtD,OATAtC,EAAIuC,QAAQ,SAACC,EAAMC,GACjBJ,EAAMK,KAAK,CACT1C,IAAKsC,EACLd,IAAKiB,EACLE,WAAYzB,KAAK0B,IAAIV,EAAanB,OAASyB,EAAKzB,QAChDyB,KAAMA,MAIHH,GACN,IAEHpD,KAAKkD,YAAclD,KAAKkD,YAAYU,KAAK,SAAC9F,EAAG+F,GAC3C,OAAG/F,EAAE4F,WAAaG,EAAEH,YAAoB,EACrC5F,EAAE4F,WAAaG,EAAEH,WAAmB,EACpC5F,EAAE4F,aAAeG,EAAEH,WAAmB,OAAzC,IAGF1D,KAAK8D,WAAa,GAIlB,IAFA,IAAIC,EAAoB/D,KAAKkD,YAAYxC,OAEjCsD,EAAW,EAAGxC,EAAI,EAAGwC,EAAWhE,KAAKpC,MAAMa,EAAG+C,IAAK,CACzD,GAAGuC,IAAsBvC,EAAG,OACzBxB,KAAKkD,YAAY1B,GAAG+B,OAASN,IAEhCjD,KAAK8D,WAAWE,GAAYhE,KAAKkD,YAAY1B,GAE7CxB,KAAKiE,aAAajE,KAAKkD,YAAY1B,GAAGT,IAAKf,KAAKkD,YAAY1B,GAAGe,KAC/DyB,kDAOF,IAFA,IAAIE,EAAmBlE,KAAK8D,WAAWpD,OAE/Bc,EAAI,EAAGA,EAAIxB,KAAKpC,MAAMa,EAAG+C,IAAK,CACpC,GAAG0C,IAAqB1C,EAAG,OAC3BxB,KAAKmE,eAAenE,KAAK8D,WAAWtC,GAAGT,IAAKf,KAAK8D,WAAWtC,GAAGe,2CAItDxB,EAAKwB,GAChBvC,KAAKoE,iBAAiBrD,EAAKwB,GAAK,0CAGnBxB,EAAKwB,GAClBvC,KAAKoE,iBAAiBrD,EAAKwB,GAAK,4CAGjBxB,EAAKwB,EAAK8B,GACzBrE,KAAKM,SAAS,SAAAC,GAIZ,OAFAA,EAAMC,MAAMO,GAAKwB,GAAKpD,SAAWkF,EAE1B9D,uCAIA+D,EAAOnG,GAChB,OAAQA,EAAQ6B,KAAKqC,aAAaiC,GAAS,KAAKC,QAAQ,yCAG5CxD,GACZf,KAAKM,SAAS,SAAAC,GAKZ,OAJAA,EAAMC,MAAMO,GAAKuC,QAAQ,SAACC,GACxBA,EAAKnE,MAAO,IAGP,0CAIE2B,GACXf,KAAKM,SAAS,SAAAC,GAKZ,OAJAA,EAAMC,MAAMO,GAAKuC,QAAQ,SAACC,GACxBA,EAAKnE,MAAO,IAGP,sCA4CT,IAHO,IAAAoF,EAAAxE,KACH3B,EAAO,GADJoG,EAAA,SAGCjD,GACNnD,EAAKoF,KACH5F,EAAAC,EAAAC,cAAC4B,EAAD,CAAK+E,IAAKF,EAAK5D,UAAUY,GAAImD,SAAUH,EAAK5D,UAAUY,IACnDgD,EAAKjE,MAAMC,MAAMgB,GAAGoD,IAAI,SAACrB,EAAMC,GAAP,OACvB3F,EAAAC,EAAAC,cAACmB,EAAD,CACEwF,IAAKlB,EACLhE,aAAcgF,EAAKK,WAAWrD,EAAG+B,EAAKzB,QACtClD,QAAS,SAACV,GAAD,OAAOsG,EAAKM,YAAY5G,EAAGsD,EAAGgC,IACvC1E,YAAa,SAACZ,GAAD,OAAOsG,EAAKO,WAAW7G,EAAGsD,EAAGgC,IAC1CxE,WAAY,SAACd,GAAD,OAAOsG,EAAKQ,UAAU9G,EAAGsD,EAAGgC,IACxCpE,KAAMmE,EAAKnE,KACXjB,MAAOoF,EAAKzB,OACZ3C,SAAUoE,EAAKpE,aAEnBtB,EAAAC,EAAAC,cAAC0B,EAAD,CACEX,YAAa,SAACZ,GAAD,OAAOsG,EAAKS,cAAczD,IACvCxC,WAAY,SAACd,GAAD,OAAOsG,EAAKU,aAAa1D,IACrC9B,YAAa,SAACxB,GAAD,OAAOsG,EAAK9E,YAAYxB,EAAGsD,IACxCrD,MAAOqG,EAAKjE,MAAMC,MAAMgB,GAAG2B,OAAO,SAACgC,EAAG5B,GAAJ,OAAc4B,EAAI5B,EAAKzB,QAAQ,QAlBjEN,EAAI,EAAGA,EAAIxB,KAAKpC,MAAMS,KAAMmD,IAAKiD,EAAjCjD,GAuBR,OACE3D,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAA,eACEF,EAAAC,EAAAC,cAAA,mJACAF,EAAAC,EAAAC,cAAA,KAAGqH,KAAK,IAAIzG,UAAU,YAAYC,QAASoB,KAAKI,UAAhD,0FAEFvC,EAAAC,EAAAC,cAAA,cACAF,EAAAC,EAAAC,cAAA,aACGM,GAEHR,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAC4B,EAAD,KACGK,KAAKO,MAAMc,KAAK7C,KAAKoG,IAAI,SAACS,EAAKf,GAAN,OACxBzG,EAAAC,EAAAC,cAACW,EAAD,CAAMgG,IAAKJ,EAAOnG,MAAOkH,gBAjTJC,IAAMC,WCH1BC,EAAA,SAAC5H,GACd,OACEC,EAAAC,EAAAC,cAAC0H,EAAD,CAAOjH,KAAMZ,EAAMY,KAAMH,KAAMT,EAAMS,KAAMI,EAAGb,EAAMa,EAClDyC,aAActD,EAAMsD,aACpBd,SAAUxC,EAAMwC,SAChBV,YAAa9B,EAAM8B,eCJJgG,cACnB,SAAAA,EAAY9H,GAAO,IAAAiC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAA0F,IACjB7F,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAA4F,GAAAvF,KAAAH,KAAMpC,KAYRI,SAAW,SAACE,GACVA,EAAEmC,iBAEFR,EAAK8F,WAAW,UAhBC9F,EAmBnB8F,WAAa,SAACC,GACZ/F,EAAKS,SAAS,CACZsF,KAAMA,KArBS/F,EAyBnB5B,SAAW,SAACC,EAAG2H,GACbhG,EAAKS,SAAS,CACZlC,OAAQ0B,OAAO8C,OAAO,GAAI/C,EAAKU,MAAMnC,OAA7B0B,OAAAgG,EAAA,EAAAhG,CAAA,GACL+F,EAAO7D,SAAS9D,EAAE6H,OAAO5H,YA5Bb0B,EAiCnBO,SAAW,SAAClC,GACV2B,EAAKS,SAAS,SAACC,EAAOyF,GACpB,MAAO,CAAC5H,OAAQ0B,OAAO8C,OAAO,GAAIrC,EAAMnC,OAAQ,CAACC,KAAMkC,EAAMnC,OAAOC,KAAO,QAnC5DwB,EAuCnBH,YAAc,SAACxB,GACb2B,EAAKS,SAAS,SAACC,EAAOyF,GACpB,MAAO,CAAC5H,OAAQ0B,OAAO8C,OAAO,GAAIrC,EAAMnC,OAAQ,CAACC,KAAMkC,EAAMnC,OAAOC,KAAO,QAtC7EwB,EAAKU,MAAQ,CACXnC,OAAQ,CACNC,KAAM,GACNG,KAAM,GACNC,EAAG,IAELmH,KAAM,eATS/F,wEA8CjB,IAAI+F,EAEJ,OAAO5F,KAAKO,MAAMqF,MAChB,IAAK,cAAeA,EAAO/H,EAAAC,EAAAC,cAACJ,EAAD,CACzBK,SAAUgC,KAAKhC,SACfC,SAAU+B,KAAK/B,SACfG,OAAQ4B,KAAKO,MAAMnC,SACnB,MACF,IAAK,QAASwH,EAAO/H,EAAAC,EAAAC,cAACyH,EAAD,CACnBnH,KAAM2B,KAAKO,MAAMnC,OAAOC,KACxBG,KAAMwB,KAAKO,MAAMnC,OAAOI,KACxBC,EAAGuB,KAAKO,MAAMnC,OAAOK,EACrByC,aAAc,EACdd,SAAUJ,KAAKI,SACfV,YAAaM,KAAKN,cAMtB,OAAOkG,SAnEsBN,IAAMC,WCEvCU,IAASC,OAAOrI,EAAAC,EAAAC,cAACoI,EAAD,MAASC,SAASC,eAAe","file":"static/js/main.ac698e0a.chunk.js","sourcesContent":["import React from 'react';\n\nexport default (props) => {\n  return (\n      <div>\n        <h1>Построить таблицу</h1>\n\n        <form onSubmit={props.onSubmit}>\n          <input onChange={(e) => props.onChange(e, 'rows')} value={props.values.rows} type=\"number\" placeholder=\"Введите количество строк\" />\n          <input onChange={(e) => props.onChange(e, 'cols')} value={props.values.cols} type=\"number\" placeholder=\"Введите количество столбцов\" />\n          <input onChange={(e) => props.onChange(e, 'x')} value={props.values.x} type=\"number\" placeholder=\"Введите число X\" />\n\n          <input type=\"submit\" value=\"Построить\" />\n        </form>\n      </div>\n    );\n};\n","import React from 'react';\n\nexport default (props) => {\n  return <td className={props.className}\n             onClick={props.onClick}\n             onMouseEnter={props.onMouseOver}\n             onMouseLeave={props.onMouseOut}>\n              <span className=\"amount\">{props.value}</span>\n              {props.children}\n         </td>;\n}\n","import Cell from '../cell/cell';\n\nimport React from 'react';\n\nexport default (props) => {\n  let classes = [\n    props.higlight ? 'higlight' : '',\n    props.over ? 'over' : ''\n  ];\n\n  let className = classes.join(' ');\n\n  let style = {\n    height: props.percentValue + '%'\n  };\n\n  return (\n    <Cell className={className} value={props.value}\n    onClick={props.onClick}\n    onMouseOver={props.onMouseOver}\n    onMouseOut={props.onMouseOut}>\n      <span className=\"percent_value\">{props.percentValue}%</span>\n      <div className=\"percent\" style={style}></div>\n    </Cell>\n  );\n}\n\n//   shouldComponentUpdate(nextProps, nextState) {\n//     if(nextProps.higlight === this.props.higlight\n//       && nextProps.value === this.props.value\n//       && nextProps.percentValue === this.props.percentValue\n//       && nextProps.over === this.props.over\n//     )  {\n//       return false;\n//     }\n//\n//     return true;\n//   }\n","import Cell from '../cell/cell';\n\nimport React from 'react';\n\nexport default (props) => {\n  return (\n    <Cell className=\"sum_cell\" value={props.value}\n      onMouseOver={props.onMouseOver}\n      onMouseOut={props.onMouseOut}>\n      <span onClick={props.onRowRemove} className=\"delete_row\"><span>Удалить</span></span>\n    </Cell>\n  );\n}\n","import React from 'react';\n\nexport default (props) => {\n  return (\n    <tr>{props.children}</tr>\n  );\n};\n","import React from 'react';\n\nimport Cell from '../cell/cell';\nimport PercentCell from '../percent-cell/percent-cell';\nimport SumCell from '../sum-cell/sum-cell';\nimport Row from '../row/row';\n\nexport default class Table extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.amountDigitsIndex = props.amountDigits + 2;\n\n    this.rowIdList = [];\n    this._currentRowId = -1;\n\n    this.state = {\n      table: this.generateTableData()\n    };\n\n    this.state.sums = {\n      rows: this.getRowsSums(),\n      cols: this.getColsSums()\n    };\n  }\n\n  getNextRowId() {\n    return ++this._currentRowId;\n  }\n\n  generateTableData() {\n    let table = [];\n\n    for(let i = 0; i < this.props.rows; i++) {\n      table[i] = this.generateRowData(i);\n      this.rowIdList[i] = this.getNextRowId();\n    }\n\n    return table;\n  }\n\n  generateRowData(i) {\n    let row = [];\n\n    for(let j = 0; j < this.props.cols; j++) {\n      row[j] = this.generateCellData(i, j);\n    }\n\n    return row;\n  }\n\n  generateCellData(x, y) {\n    let idTemplate = 'x_y';\n\n    return {\n      id: idTemplate.replace('x', x).replace('y', y),\n      amount: this.generateAmount()\n    };\n  }\n\n  generateAmount() {\n    return parseInt(Math.random()\n                      .toString()\n                      .substring(2, this.amountDigitsIndex)\n                    );\n  }\n\n  calcSums() {\n    let sums = {\n        rows: this.getRowsSums(),\n        cols: this.getColsSums()\n    };\n\n    this.setState({sums});\n  }\n\n  getRowsSums() {\n    let rows = [];\n\n    for(let i = 0; i < this.props.rows; i++) {\n      rows[i] = this.calcSumByRow(i);\n    }\n\n    return rows;\n  }\n\n  getColsSums() {\n    let cols = [];\n\n    for(let i = 0; i < this.props.cols; i++) {\n      cols[i] = this.calcSumByCol(i);\n    }\n\n    return cols;\n  }\n\n  getSumsByCell(row, col) {\n    return {\n      row: this.calcSumByRow(row),\n      col: this.calcSumByCol(col)\n    }\n  }\n\n  calcSumByRow(row) {\n    let sumByRow = 0;\n\n    for(let i = 0; i < this.props.cols; i++) {\n      sumByRow += this.state.table[row][i].amount;\n    }\n\n    return sumByRow;\n  }\n\n  calcSumByCol(col) {\n    let sumByCol = 0;\n\n    for(let i = 0; i < this.props.rows; i++) {\n      sumByCol += this.state.table[i][col].amount;\n    }\n\n    return sumByCol;\n  }\n\n  onCellClick(e, row, col) {\n    // TODO:\n    this.setState(state => {\n      let newTableState = [...this.state.table];\n      newTableState[row] = [...newTableState[row]];\n      newTableState[row][col] = Object.assign({}, newTableState[row][col], {\n        amount: newTableState[row][col].amount + 1\n      });\n\n      return {table: newTableState};\n    }, () => {\n      this.calcSums();\n\n      this.unHiglightProcess();\n      this.higlightProcess(row, col);\n    });\n  }\n\n  onCellOver(e, row, col) {\n    this.higlightProcess(row, col);\n  }\n\n  onCellOut(e, row, col) {\n    this.unHiglightProcess();\n  }\n\n  higlightProcess(cellRow, cellCol) {\n    let cellSelected = this.state.table[cellRow][cellCol];\n\n    this.sortedCells = this.state.table.reduce((cells, row, rowIndex) => {\n      row.forEach((cell, colIndex) => {\n        cells.push({\n          row: rowIndex,\n          col: colIndex,\n          amountDiff: Math.abs(cellSelected.amount - cell.amount),\n          cell: cell\n        });\n      });\n\n      return cells;\n    }, []);\n\n    this.sortedCells = this.sortedCells.sort((a, b) => {\n      if(a.amountDiff < b.amountDiff) return -1;\n      if(a.amountDiff > b.amountDiff) return 1;\n      if(a.amountDiff === b.amountDiff) return 0;\n    });\n\n    this.higlighted = [];\n\n    let sortedCellsLength = this.sortedCells.length;\n\n    for(let selected = 0, i = 0; selected < this.props.x; i++) {\n      if(sortedCellsLength === i) return;\n      if(this.sortedCells[i].cell === cellSelected) continue;\n\n      this.higlighted[selected] = this.sortedCells[i];\n\n      this.higlightCell(this.sortedCells[i].row, this.sortedCells[i].col);\n      selected++;\n    }\n  }\n\n  unHiglightProcess() {\n    let higlightedLength = this.higlighted.length;\n\n    for(let i = 0; i < this.props.x; i++) {\n      if(higlightedLength === i) return;\n      this.unHiglightCell(this.higlighted[i].row, this.higlighted[i].col);\n    }\n  }\n\n  higlightCell(row, col) {\n    this.setCellHighlight(row, col, true);\n  }\n\n  unHiglightCell(row, col) {\n    this.setCellHighlight(row, col, false);\n  }\n\n  setCellHighlight(row, col, light) {\n    this.setState(state => {\n      // let state = Object.assign({}, stateCurrent);\n      state.table[row][col].higlight = light;\n\n      return state;\n    });\n  }\n\n  getPercent(index, value) {\n    return (value / this.calcSumByRow(index) * 100).toFixed(2);\n  }\n\n  onSumCellOver(row) {\n    this.setState(state => {\n      state.table[row].forEach((cell) => {\n        cell.over = true;\n      });\n\n      return {};\n    });\n  }\n\n  onSumCellOut(row) {\n    this.setState(state => {\n      state.table[row].forEach((cell) => {\n        cell.over = false;\n      });\n\n      return {};\n\n    });\n  }\n\n  onRowAdd = (e) => {\n    e.preventDefault();\n\n    this.setState(state => {\n\n      let table = [...state.table];\n\n      table[table.length] = this.generateRowData(state.table.length);\n      this.rowIdList[this.rowIdList.length] = this.getNextRowId();\n\n      return {table: table};\n    }, () => {\n      this.calcSums();\n    });\n\n    this.props.onRowAdd(e);\n  }\n\n  onRowRemove = (e, row) => {\n    e.preventDefault();\n\n    this.props.onRowRemove(e);\n\n    this.setState(state => {\n\n      let table = [...state.table];\n\n      table.splice(row, 1);\n      this.rowIdList.splice(row, 1);\n\n      return {table: table};\n    }, () => {\n      this.calcSums();\n    });\n  }\n\n  render() {\n    let rows = [];\n\n    for(let i = 0; i < this.props.rows; i++) {\n      rows.push(\n        <Row key={this.rowIdList[i]} dataAttr={this.rowIdList[i]}>\n          {this.state.table[i].map((cell, colIndex) =>\n            <PercentCell\n              key={colIndex}\n              percentValue={this.getPercent(i, cell.amount)}\n              onClick={(e) => this.onCellClick(e, i, colIndex)}\n              onMouseOver={(e) => this.onCellOver(e, i, colIndex)}\n              onMouseOut={(e) => this.onCellOut(e, i, colIndex)}\n              over={cell.over}\n              value={cell.amount}\n              higlight={cell.higlight}/>\n          )}\n          <SumCell\n            onMouseOver={(e) => this.onSumCellOver(i)}\n            onMouseOut={(e) => this.onSumCellOut(i)}\n            onRowRemove={(e) => this.onRowRemove(e, i)}\n            value={this.state.table[i].reduce((s, cell) =>  s + cell.amount, 0)}/>\n        </Row>\n      );\n    }\n\n    return (\n      <table>\n        <caption>\n          <h2>Сгенерированная таблица</h2>\n          <a href=\"#\" className=\"table-btn\" onClick={this.onRowAdd}>Добавить строку</a>\n        </caption>\n        <thead></thead>\n        <tbody>\n          {rows}\n        </tbody>\n        <tfoot>\n          <Row>\n            {this.state.sums.cols.map((sum, index) =>\n              <Cell key={index} value={sum}/>\n            )}\n          </Row>\n        </tfoot>\n      </table>\n    );\n  }\n}\n","import React from 'react';\n\nimport Table from '../table/table';\n\nexport default (props) => {\n  return (\n    <Table cols={props.cols} rows={props.rows} x={props.x}\n      amountDigits={props.amountDigits}\n      onRowAdd={props.onRowAdd}\n      onRowRemove={props.onRowRemove}/>\n  );\n};\n","import React from 'react';\n\nimport PageCreateTable from '../page-create-table/page-create-table';\nimport PageTable from '../page-table/page-table';\n\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      values: {\n        rows: '',\n        cols: '',\n        x: ''\n      },\n      page: 'CreateTable'\n    };\n  }\n\n  onSubmit = (e) => {\n    e.preventDefault();\n\n    this.togglePage('Table');\n  }\n\n  togglePage = (page) => {\n    this.setState({\n      page: page\n    });\n  }\n\n  onChange = (e, name) => {\n    this.setState({\n      values: Object.assign({}, this.state.values, {\n        [name]: parseInt(e.target.value)\n      })\n    });\n  }\n\n  onRowAdd = (e) => {\n    this.setState((state, cb) => {\n      return {values: Object.assign({}, state.values, {rows: state.values.rows + 1})};\n    });\n  }\n\n  onRowRemove = (e) => {\n    this.setState((state, cb) => {\n      return {values: Object.assign({}, state.values, {rows: state.values.rows - 1})};\n    });\n  }\n\n  render() {\n    let page;\n\n    switch(this.state.page) {\n      case 'CreateTable': page = <PageCreateTable\n        onSubmit={this.onSubmit}\n        onChange={this.onChange}\n        values={this.state.values}/>;\n        break;\n      case 'Table': page = <PageTable\n        rows={this.state.values.rows}\n        cols={this.state.values.cols}\n        x={this.state.values.x}\n        amountDigits={3}\n        onRowAdd={this.onRowAdd}\n        onRowRemove={this.onRowRemove}\n        />;\n        break;\n      default: break;\n    }\n\n    return page;\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './index.css';\n\nimport App from './components/app/app';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}