(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,n){e.exports=n(17)},16:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),l=n(8),u=n.n(l),s=(n(16),n(9)),r=n(2),i=n(3),c=n(5),h=n(4),m=n(6),v=function(e){return o.a.createElement("div",null,o.a.createElement("h1",null,"\u041f\u043e\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u0442\u0430\u0431\u043b\u0438\u0446\u0443"),o.a.createElement("form",{onSubmit:e.onSubmit},o.a.createElement("input",{onChange:function(t){return e.onChange(t,"rows")},value:e.values.rows,type:"number",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u0442\u0440\u043e\u043a"}),o.a.createElement("input",{onChange:function(t){return e.onChange(t,"cols")},value:e.values.cols,type:"number",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u0442\u043e\u043b\u0431\u0446\u043e\u0432"}),o.a.createElement("input",{onChange:function(t){return e.onChange(t,"x")},value:e.values.x,type:"number",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0447\u0438\u0441\u043b\u043e X"}),o.a.createElement("input",{type:"submit",value:"\u041f\u043e\u0441\u0442\u0440\u043e\u0438\u0442\u044c"})))},f=n(1),g=function(e){return o.a.createElement("td",{className:e.className,onClick:e.onClick,onMouseEnter:e.onMouseOver,onMouseLeave:e.onMouseOut},o.a.createElement("span",{className:"amount"},e.value),e.children)},w=function(e){var t=[e.higlight?"higlight":"",e.over?"over":""].join(" "),n={height:e.percentValue+"%"};return o.a.createElement(g,{className:t,value:e.value,onClick:e.onClick,onMouseOver:e.onMouseOver,onMouseOut:e.onMouseOut},o.a.createElement("span",{className:"percent_value"},e.percentValue,"%"),o.a.createElement("div",{className:"percent",style:n}))},d=function(e){return o.a.createElement(g,{className:"sum_cell",value:e.value,onMouseOver:e.onMouseOver,onMouseOut:e.onMouseOut},o.a.createElement("span",{onClick:e.onRowRemove,className:"delete_row"},o.a.createElement("span",null,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")))},p=function(e){return o.a.createElement("tr",null,e.children)},b=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(h.a)(t).call(this,e))).onRowAdd=function(e){e.preventDefault(),n.setState(function(e){var t=Object(f.a)(e.table);return t[t.length]=n.generateRowData(e.table.length),n.rowIdList[n.rowIdList.length]=n.getNextRowId(),{table:t}},function(){n.calcSums()}),n.props.onRowAdd(e)},n.onRowRemove=function(e,t){e.preventDefault(),n.props.onRowRemove(e),n.setState(function(e){var a=Object(f.a)(e.table);return a.splice(t,1),n.rowIdList.splice(t,1),{table:a}},function(){n.calcSums()})},n.amountDigitsIndex=e.amountDigits+2,n.rowIdList=[],n._currentRowId=-1,n.state={table:n.generateTableData()},n.state.sums={rows:n.getRowsSums(),cols:n.getColsSums()},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"getNextRowId",value:function(){return++this._currentRowId}},{key:"generateTableData",value:function(){for(var e=[],t=0;t<this.props.rows;t++)e[t]=this.generateRowData(t),this.rowIdList[t]=this.getNextRowId();return e}},{key:"generateRowData",value:function(e){for(var t=[],n=0;n<this.props.cols;n++)t[n]=this.generateCellData(e,n);return t}},{key:"generateCellData",value:function(e,t){return{id:"x_y".replace("x",e).replace("y",t),amount:this.generateAmount()}}},{key:"generateAmount",value:function(){return parseInt(Math.random().toString().substring(2,this.amountDigitsIndex))}},{key:"calcSums",value:function(){var e={rows:this.getRowsSums(),cols:this.getColsSums()};this.setState({sums:e})}},{key:"getRowsSums",value:function(){for(var e=[],t=0;t<this.props.rows;t++)e[t]=this.calcSumByRow(t);return e}},{key:"getColsSums",value:function(){for(var e=[],t=0;t<this.props.cols;t++)e[t]=this.calcSumByCol(t);return e}},{key:"getSumsByCell",value:function(e,t){return{row:this.calcSumByRow(e),col:this.calcSumByCol(t)}}},{key:"calcSumByRow",value:function(e){for(var t=0,n=0;n<this.props.cols;n++)t+=this.state.table[e][n].amount;return t}},{key:"calcSumByCol",value:function(e){for(var t=0,n=0;n<this.props.rows;n++)t+=this.state.table[n][e].amount;return t}},{key:"onCellClick",value:function(e,t,n){var a=this;this.setState(function(e){var o=Object(f.a)(a.state.table);return o[t]=Object(f.a)(o[t]),o[t][n]=Object.assign({},o[t][n],{amount:o[t][n].amount+1}),{table:o}},function(){a.calcSums(),a.unHiglightProcess(),a.higlightProcess(t,n)})}},{key:"onCellOver",value:function(e,t,n){this.higlightProcess(t,n)}},{key:"onCellOut",value:function(e,t,n){this.unHiglightProcess()}},{key:"higlightProcess",value:function(e,t){var n=this.state.table[e][t];this.sortedCells=this.state.table.reduce(function(e,t,a){return t.forEach(function(t,o){e.push({row:a,col:o,amountDiff:Math.abs(n.amount-t.amount),cell:t})}),e},[]),this.sortedCells=this.sortedCells.sort(function(e,t){return e.amountDiff<t.amountDiff?-1:e.amountDiff>t.amountDiff?1:e.amountDiff===t.amountDiff?0:void 0}),this.higlighted=[];for(var a=this.sortedCells.length,o=0,l=0;o<this.props.x;l++){if(a===l)return;this.sortedCells[l].cell!==n&&(this.higlighted[o]=this.sortedCells[l],this.higlightCell(this.sortedCells[l].row,this.sortedCells[l].col),o++)}}},{key:"unHiglightProcess",value:function(){for(var e=this.higlighted.length,t=0;t<this.props.x;t++){if(e===t)return;this.unHiglightCell(this.higlighted[t].row,this.higlighted[t].col)}}},{key:"higlightCell",value:function(e,t){this.setCellHighlight(e,t,!0)}},{key:"unHiglightCell",value:function(e,t){this.setCellHighlight(e,t,!1)}},{key:"setCellHighlight",value:function(e,t,n){this.setState(function(a){return a.table[e][t].higlight=n,a})}},{key:"getPercent",value:function(e,t){return(t/this.calcSumByRow(e)*100).toFixed(2)}},{key:"onSumCellOver",value:function(e){this.setState(function(t){return t.table[e].forEach(function(e){e.over=!0}),{}})}},{key:"onSumCellOut",value:function(e){this.setState(function(t){return t.table[e].forEach(function(e){e.over=!1}),{}})}},{key:"render",value:function(){for(var e=this,t=[],n=function(n){t.push(o.a.createElement(p,{key:e.rowIdList[n],dataAttr:e.rowIdList[n]},e.state.table[n].map(function(t,a){return o.a.createElement(w,{key:a,percentValue:e.getPercent(n,t.amount),onClick:function(t){return e.onCellClick(t,n,a)},onMouseOver:function(t){return e.onCellOver(t,n,a)},onMouseOut:function(t){return e.onCellOut(t,n,a)},over:t.over,value:t.amount,higlight:t.higlight})}),o.a.createElement(d,{onMouseOver:function(t){return e.onSumCellOver(n)},onMouseOut:function(t){return e.onSumCellOut(n)},onRowRemove:function(t){return e.onRowRemove(t,n)},value:e.state.table[n].reduce(function(e,t){return e+t.amount},0)})))},a=0;a<this.props.rows;a++)n(a);return o.a.createElement("table",null,o.a.createElement("caption",null,o.a.createElement("h2",null,"\u0421\u0433\u0435\u043d\u0435\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u0430\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u0430"),o.a.createElement("a",{href:"#",className:"table-btn",onClick:this.onRowAdd},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0442\u0440\u043e\u043a\u0443")),o.a.createElement("thead",null),o.a.createElement("tbody",null,t),o.a.createElement("tfoot",null,o.a.createElement(p,null,this.state.sums.cols.map(function(e,t){return o.a.createElement(g,{key:t,value:e})}))))}}]),t}(o.a.Component),C=function(e){return o.a.createElement(b,{cols:e.cols,rows:e.rows,x:e.x,amountDigits:e.amountDigits,onRowAdd:e.onRowAdd,onRowRemove:e.onRowRemove})},y=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(h.a)(t).call(this,e))).onSubmit=function(e){e.preventDefault(),n.togglePage("Table")},n.togglePage=function(e){n.setState({page:e})},n.onChange=function(e,t){n.setState({values:Object.assign({},n.state.values,Object(s.a)({},t,parseInt(e.target.value)))})},n.onRowAdd=function(e){n.setState(function(e,t){return{values:Object.assign({},e.values,{rows:e.values.rows+1})}})},n.onRowRemove=function(e){n.setState(function(e,t){return{values:Object.assign({},e.values,{rows:e.values.rows-1})}})},n.state={values:{rows:"",cols:"",x:""},page:"CreateTable"},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e;switch(this.state.page){case"CreateTable":e=o.a.createElement(v,{onSubmit:this.onSubmit,onChange:this.onChange,values:this.state.values});break;case"Table":e=o.a.createElement(C,{rows:this.state.values.rows,cols:this.state.values.cols,x:this.state.values.x,amountDigits:3,onRowAdd:this.onRowAdd,onRowRemove:this.onRowRemove})}return e}}]),t}(o.a.Component);u.a.render(o.a.createElement(y,null),document.getElementById("root"))}},[[10,1,2]]]);
//# sourceMappingURL=main.ac698e0a.chunk.js.map